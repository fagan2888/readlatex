%%%
%%% Document from http://tex.stackexchange.com/questions/225052/using-a-figure-again-in-document
%%% Work of http://tex.stackexchange.com/users/5764/werner, licensed under https://creativecommons.org/licenses/by-sa/3.0/
%%%
\documentclass{article}
\usepackage{etoolbox}
\usepackage{graphicx,environ}
\usepackage{hyperref}
\usepackage{newfile}
\usepackage{zref-savepos}

\NewEnviron{sourcefigure}[1][htbp]{%
    {
        \let\caption\relax
        \let\ref\relax
        \renewcommand{\label}[1]{%
            \gdef\sfname{sf:##1}
        }%
        \setbox1=\hbox{\BODY}
    }% Capture \label
    %%% NEXT LINE FROM COMMENT by ereg (http://tex.stackexchange.com/users/4427/egreg) on same post
    \global\expandafter\let\csname\sfname\endcsname\BODY
    \begin{figure}[#1]
        \BODY
    \end{figure}
}

\makeatletter

\newcommand{\reusefigure}[2][htbp]{%
    {
        \addtocounter{figure}{-1}%
        \ifdef{\theHfigure}{
            \renewcommand{\theHfigure}{dupe-fig}% If you're using hyperref
        }{
                                                % If you're not using hyperref
        }
        \renewcommand{\thefigure}{\old@ref{#2}}% Figure counter is \ref
        \renewcommand{\addcontentsline}[3]{}% Avoid placing figure in LoF
        \renewcommand{\label}[1]{}% Make \label inactive
        \begin{figure}[#1] \csname sf:#2\endcsname \end{figure}
    }
}

\newcounter{readlatex@ypos@callcount}

\newcommand{\readlatex@ypos@setup}{
    \addtocounter{readlatex@ypos@callcount}{1}
    \zsavepos{\thereadlatex@ypos@callcount}
}

\newcommand{\readlatex@ypos@value}{\the\dimexpr\zposy{\thereadlatex@ypos@callcount}sp\relax}

\newcommand{\readlatex@ypos}{\readlatex@ypos@setup\readlatex@ypos@value}

\newoutputstream{read@latex}
\openoutputfile{\jobname.readlatex}{read@latex}

\AtEndDocument{\closeoutputstream{read@latex}}

\AtBeginDocument{
    \let\old@ref\ref
    \renewcommand*{\ref}[1]{
        \old@ref{#1}
        \addtostream{read@latex}{#1}
        \readlatex@ypos@setup
        \edef\readlatex@curpos{\readlatex@ypos@value}
        \readlatex@curpos
        \addtostream{read@latex}{\readlatex@curpos}
    }
}
\makeatother


\begin{document}

We have Figures~\ref{fig:caption-a} and~\ref{fig:caption-c}.

\begin{sourcefigure}[ht]
  \centering\includegraphics[height=50pt]{example-image-a}
  \caption{A figure caption}\label{fig:caption-a}
\end{sourcefigure}

\reusefigure[ht]{fig:caption-a}

\begin{figure}[ht]
  \centering\includegraphics[height=50pt]{example-image-c}
  \caption{Another figure}\label{fig:caption-c}
\end{figure}

We have Figures~\ref{fig:caption-a} and~\ref{fig:caption-c}.

\makeatletter

\readlatex@ypos

\readlatex@ypos

\readlatex@ypos

\readlatex@ypos

\end{document}